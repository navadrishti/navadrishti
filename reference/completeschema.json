{
  "enums": {
    "account_status_enum": ["active", "suspended", "banned", "pending_verification"],
    "comment_status_enum": ["active", "hidden", "flagged", "deleted"],
    "condition_type_enum": ["new", "like_new", "good", "fair", "poor"],
    "content_visibility_enum": ["public", "connections", "organization", "private"],
    "csr_employee_role_enum": ["volunteer", "coordinator", "lead", "manager"],
    "csr_metric_unit_enum": ["count", "hours", "currency", "percentage", "tons", "liters", "kWh"],
    "csr_project_status_enum": ["planning", "active", "on-hold", "completed", "cancelled"],
    "item_status_enum": ["active", "sold", "reserved", "cancelled"],
    "item_type_enum": ["single", "bulk"],
    "post_type_enum": ["text", "image", "video", "article", "event", "achievement", "update"],
    "priority_enum": ["low", "medium", "high", "urgent"],
    "reaction_type_enum": ["like", "love", "support", "celebrate", "insightful"],
    "service_status_enum": ["active", "in_progress", "completed", "cancelled"],
    "urgency_level_enum": ["low", "medium", "high", "critical"],
    "user_type_enum": ["individual", "ngo", "company"],
    "verification_level_enum": ["basic", "advanced"],
    "verification_status_enum": ["unverified", "pending", "verified", "rejected"],
    "admin_status_enum": ["pending", "approved", "rejected"]
  },
  "tables": {
    "users": {
      "name": "users",
      "columns": [
        { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('users_id_seq')", "isPrimaryKey": true },
        { "name": "email", "pgType": "varchar", "tsType": "string", "nullable": false, "isUnique": true },
        { "name": "password", "pgType": "varchar", "tsType": "string", "nullable": false },
        { "name": "user_type", "pgType": "user_type_enum", "tsType": "string", "nullable": false },
        { "name": "name", "pgType": "varchar", "tsType": "string", "nullable": false },
        { "name": "phone", "pgType": "varchar", "tsType": "string | null", "nullable": true },
        { "name": "location", "pgType": "varchar", "tsType": "string | null", "nullable": true },
        { "name": "verified", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
        { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
        { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
        { "name": "email_verified", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
        { "name": "phone_verified", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
        { "name": "two_factor_enabled", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
        { "name": "two_factor_secret", "pgType": "varchar", "tsType": "string | null", "nullable": true },
        { "name": "account_status", "pgType": "account_status_enum", "tsType": "string", "nullable": true, "default": "pending_verification" },
        { "name": "last_login", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
        { "name": "login_attempts", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
        { "name": "locked_until", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
        { "name": "timezone", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "'UTC'" },
        { "name": "preferences", "pgType": "jsonb", "tsType": "any", "nullable": true },
        { "name": "privacy_settings", "pgType": "jsonb", "tsType": "any", "nullable": true },
        { "name": "verification_status", "pgType": "verification_status_enum", "tsType": "string", "nullable": true, "default": "unverified" },
        { "name": "verification_level", "pgType": "verification_level_enum", "tsType": "string", "nullable": true, "default": "basic" },
        { "name": "verified_at", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
        { "name": "identity_verified", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
        { "name": "profile_image", "pgType": "text", "tsType": "string | null", "nullable": true },
        { "name": "city", "pgType": "varchar", "tsType": "string | null", "nullable": true },
        { "name": "state_province", "pgType": "varchar", "tsType": "string | null", "nullable": true },
        { "name": "pincode", "pgType": "varchar", "tsType": "string | null", "nullable": true },
        { "name": "country", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "India" },
        { "name": "email_verified_at", "pgType": "timestamp", "tsType": "string | null", "nullable": true },
        { "name": "phone_verified_at", "pgType": "timestamp", "tsType": "string | null", "nullable": true },
        { "name": "profile_data", "pgType": "jsonb", "tsType": "any", "nullable": true },
        { "name": "bio", "pgType": "text", "tsType": "string | null", "nullable": true }
      ],
      "foreignKeys": [],
      "enumFields": [
        { "column": "user_type", "enum": "user_type_enum" },
        { "column": "account_status", "enum": "account_status_enum" },
        { "column": "verification_status", "enum": "verification_status_enum" },
        { "column": "verification_level", "enum": "verification_level_enum" }
      ]
    },
{
  "name": "users",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('users_id_seq')", "isPrimaryKey": true },
    { "name": "email", "pgType": "varchar", "tsType": "string", "nullable": false, "isUnique": true },
    { "name": "password", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "user_type", "pgType": "user_type_enum", "tsType": "string", "nullable": false },
    { "name": "name", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "phone", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "location", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "verified", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "email_verified", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "phone_verified", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "two_factor_enabled", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "two_factor_secret", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "account_status", "pgType": "account_status_enum", "tsType": "string", "nullable": true, "default": "pending_verification" },
    { "name": "last_login", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "login_attempts", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "locked_until", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "timezone", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "'UTC'" },
    { "name": "preferences", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "privacy_settings", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "verification_status", "pgType": "verification_status_enum", "tsType": "string", "nullable": true, "default": "unverified" },
    { "name": "verification_level", "pgType": "verification_level_enum", "tsType": "string", "nullable": true, "default": "basic" },
    { "name": "verified_at", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "identity_verified", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "profile_image", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "city", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "state_province", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "pincode", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "country", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "India" },
    { "name": "email_verified_at", "pgType": "timestamp", "tsType": "string | null", "nullable": true },
    { "name": "phone_verified_at", "pgType": "timestamp", "tsType": "string | null", "nullable": true }
  ],
  "foreignKeys": [],
  "enumFields": [
    { "column": "user_type", "enum": "user_type_enum" },
    { "column": "account_status", "enum": "account_status_enum" },
    { "column": "verification_status", "enum": "verification_status_enum" },
    { "column": "verification_level", "enum": "verification_level_enum" }
  ]
}
    "user_addresses": {
      "name": "user_addresses",
      "columns": [
        { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('user_addresses_id_seq')", "isPrimaryKey": true },
        { "name": "user_id", "pgType": "bigint", "tsType": "number", "nullable": false },
        { "name": "name", "pgType": "varchar", "tsType": "string", "nullable": false },
        { "name": "address_line_1", "pgType": "text", "tsType": "string", "nullable": false },
        { "name": "address_line_2", "pgType": "text", "tsType": "string | null", "nullable": true },
        { "name": "city", "pgType": "varchar", "tsType": "string", "nullable": false },
        { "name": "state", "pgType": "varchar", "tsType": "string", "nullable": false },
        { "name": "pincode", "pgType": "varchar", "tsType": "string", "nullable": false },
        { "name": "country", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "India" },
        { "name": "phone", "pgType": "varchar", "tsType": "string", "nullable": false },
        { "name": "address_type", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "home" },
        { "name": "is_default", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
        { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
        { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
      ],
      "foreignKeys": [
        { "column": "user_id", "references": { "table": "users", "column": "id" } }
      ],
      "enumFields": []
    },
{
  "name": "user_sessions",
  "columns": [
    { "name": "id", "pgType": "uuid", "tsType": "string", "nullable": false, "default": "uuid_generate_v4()", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "user_type", "pgType": "user_type_enum", "tsType": "string", "nullable": false },
    { "name": "session_data", "pgType": "jsonb", "tsType": "any", "nullable": false },
    { "name": "ip_address", "pgType": "inet", "tsType": "string | null", "nullable": true },
    { "name": "user_agent", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "device_info", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "expires_at", "pgType": "timestamptz", "tsType": "string", "nullable": false }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": [
    { "column": "user_type", "enum": "user_type_enum" }
  ]
}
{
  "name": "user_feed_preferences",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('user_feed_preferences_id_seq')", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false, "isUnique": true },
    { "name": "show_achievements", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "show_opportunities", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "show_updates", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "show_events", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "show_individual_posts", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "show_ngo_posts", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "show_company_posts", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "auto_follow_back", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "email_notifications", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "push_notifications", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "preferred_categories", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "muted_keywords", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "preferred_languages", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "profile_visibility", "pgType": "content_visibility_enum", "tsType": "string", "nullable": true, "default": "public" },
    { "name": "activity_visibility", "pgType": "content_visibility_enum", "tsType": "string", "nullable": true, "default": "public" },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": [
    { "column": "profile_visibility", "enum": "content_visibility_enum" },
    { "column": "activity_visibility", "enum": "content_visibility_enum" }
  ]
}
{
  "name": "user_interests",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('user_interests_id_seq')", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "interest_type", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "interest_value", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "interest_score", "pgType": "numeric", "tsType": "number", "nullable": true, "default": 1.0 },
    { "name": "source", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "implicit" },
    { "name": "created_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "CURRENT_TIMESTAMP" },
    { "name": "updated_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "CURRENT_TIMESTAMP" }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": []
}
{
  "name": "user_notifications",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('user_notifications_id_seq')", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "type", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "title", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "message", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "related_user_id", "pgType": "integer", "tsType": "number | null", "nullable": true },
    { "name": "related_post_id", "pgType": "bigint", "tsType": "number | null", "nullable": true },
    { "name": "related_comment_id", "pgType": "bigint", "tsType": "number | null", "nullable": true },
    { "name": "is_read", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "is_seen", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "action_url", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "read_at", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "seen_at", "pgType": "timestamptz", "tsType": "string | null", "nullable": true }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } },
    { "column": "related_user_id", "references": { "table": "users", "column": "id" } },
    { "column": "related_post_id", "references": { "table": "posts", "column": "id" } },
    { "column": "related_comment_id", "references": { "table": "post_comments", "column": "id" } }
  ],
  "enumFields": []
}
{
  "name": "login_history",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('login_history_id_seq')", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "ip_address", "pgType": "inet", "tsType": "string | null", "nullable": true },
    { "name": "user_agent", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "login_method", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "email" },
    { "name": "success", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "failure_reason", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": []
}
{
  "name": "individual_verifications",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('individual_verifications_id_seq')", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false, "isUnique": true },
    { "name": "aadhaar_number", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "aadhaar_verified", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "aadhaar_verification_date", "pgType": "timestamp", "tsType": "string | null", "nullable": true },
    { "name": "pan_number", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "pan_verified", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "pan_verification_date", "pgType": "timestamp", "tsType": "string | null", "nullable": true },
    { "name": "verification_status", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "unverified" },
    { "name": "verification_date", "pgType": "timestamp", "tsType": "string | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": []
}
{
  "name": "ngo_verifications",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('ngo_verifications_id_seq')", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false, "isUnique": true },
    { "name": "ngo_name", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "registration_number", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "registration_type", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "fcra_number", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "verification_status", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "unverified" },
    { "name": "verification_date", "pgType": "timestamp", "tsType": "string | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": []
}
{
  "name": "company_verifications",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('company_verifications_id_seq')", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false, "isUnique": true },
    { "name": "company_name", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "registration_number", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "gst_number", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "verification_status", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "unverified" },
    { "name": "verification_date", "pgType": "timestamp", "tsType": "string | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": []
}
{
  "name": "phone_verifications",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('phone_verifications_id_seq')", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "phone", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "otp", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "expires_at", "pgType": "timestamptz", "tsType": "string", "nullable": false },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": []
}
{
  "name": "otp_verifications",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('otp_verifications_id_seq')", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "contact", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "otp_code", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "verification_type", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "is_verified", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "attempts", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "expires_at", "pgType": "timestamp", "tsType": "string", "nullable": false },
    { "name": "created_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "verified_at", "pgType": "timestamp", "tsType": "string | null", "nullable": true }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": []
}
{
  "name": "email_verifications",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('email_verifications_id_seq')", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "token", "pgType": "varchar", "tsType": "string", "nullable": false, "isUnique": true },
    { "name": "expires_at", "pgType": "timestamptz", "tsType": "string", "nullable": false },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": []
}
{
  "name": "posts",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('posts_id_seq')", "isPrimaryKey": true },
    { "name": "author_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "content", "pgType": "text", "tsType": "string", "nullable": false },
    { "name": "post_type", "pgType": "post_type_enum", "tsType": "string", "nullable": true, "default": "text" },
    { "name": "media_urls", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "media_metadata", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "visibility", "pgType": "content_visibility_enum", "tsType": "string", "nullable": true, "default": "public" },
    { "name": "allow_comments", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "allow_reactions", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "is_pinned", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "is_featured", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "reaction_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "comment_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "share_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "view_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "tags", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "mentioned_users", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "category", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "location", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "organization_context", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "is_flagged", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "is_approved", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "flagged_reason", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "moderated_at", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "moderated_by", "pgType": "integer", "tsType": "number | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "published_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "author_id", "references": { "table": "users", "column": "id" } },
    { "column": "moderated_by", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": [
    { "column": "post_type", "enum": "post_type_enum" },
    { "column": "visibility", "enum": "content_visibility_enum" }
  ]
}
{
  "name": "post_comments",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('post_comments_id_seq')", "isPrimaryKey": true },
    { "name": "post_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "author_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "parent_comment_id", "pgType": "bigint", "tsType": "number | null", "nullable": true },
    { "name": "content", "pgType": "text", "tsType": "string", "nullable": false },
    { "name": "media_urls", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "mentioned_users", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "reaction_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "reply_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "status", "pgType": "comment_status_enum", "tsType": "string", "nullable": true, "default": "active" },
    { "name": "is_flagged", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "flagged_reason", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "moderated_at", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "moderated_by", "pgType": "integer", "tsType": "number | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "post_id", "references": { "table": "posts", "column": "id" } },
    { "column": "author_id", "references": { "table": "users", "column": "id" } },
    { "column": "parent_comment_id", "references": { "table": "post_comments", "column": "id" } },
    { "column": "moderated_by", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": [
    { "column": "status", "enum": "comment_status_enum" }
  ]
}
{
  "name": "post_reactions",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('post_reactions_id_seq')", "isPrimaryKey": true },
    { "name": "post_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "reaction_type", "pgType": "reaction_type_enum", "tsType": "string", "nullable": true, "default": "like" },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "post_id", "references": { "table": "posts", "column": "id" } },
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": [
    { "column": "reaction_type", "enum": "reaction_type_enum" }
  ]
}
{
  "name": "post_shares",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('post_shares_id_seq')", "isPrimaryKey": true },
    { "name": "post_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "shared_by", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "share_type", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "repost" },
    { "name": "share_message", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "platform", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "post_id", "references": { "table": "posts", "column": "id" } },
    { "column": "shared_by", "references": { "table": "users", "column": "id" } }
  ]
}
{
  "name": "post_analytics",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('post_analytics_id_seq')", "isPrimaryKey": true },
    { "name": "post_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "date", "pgType": "date", "tsType": "string", "nullable": false },
    { "name": "views_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "unique_viewers_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "reactions_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "comments_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "shares_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "engagement_rate", "pgType": "numeric", "tsType": "number", "nullable": true, "default": 0.0 },
    { "name": "reach_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "impression_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "audience_breakdown", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "geographic_breakdown", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "post_id", "references": { "table": "posts", "column": "id" } }
  ]
}
{
  "name": "post_interactions",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('post_interactions_id_seq')", "isPrimaryKey": true },
    { "name": "post_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "interaction_type", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "interaction_value", "pgType": "integer", "tsType": "number", "nullable": true, "default": 1 },
    { "name": "created_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "CURRENT_TIMESTAMP" },
    { "name": "metadata", "pgType": "jsonb", "tsType": "any", "nullable": true, "default": "{}" }
  ],
  "foreignKeys": [
    { "column": "post_id", "references": { "table": "posts", "column": "id" } }
  ]
}
{
  "name": "comment_reactions",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('comment_reactions_id_seq')", "isPrimaryKey": true },
    { "name": "comment_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "reaction_type", "pgType": "reaction_type_enum", "tsType": "string", "nullable": true, "default": "like" },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "comment_id", "references": { "table": "post_comments", "column": "id" } },
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": [
    { "column": "reaction_type", "enum": "reaction_type_enum" }
  ]
}
{
  "name": "hashtags",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('hashtags_id_seq')", "isPrimaryKey": true },
    { "name": "tag", "pgType": "varchar", "tsType": "string", "nullable": false, "isUnique": true },
    { "name": "total_mentions", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "weekly_mentions", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "daily_mentions", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "trending_score", "pgType": "numeric", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "category", "pgType": "varchar", "tsType": "string | null", "nullable": true, "default": "general" },
    { "name": "is_trending", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "created_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "CURRENT_TIMESTAMP" },
    { "name": "updated_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "CURRENT_TIMESTAMP" }
  ],
  "foreignKeys": []
}
{
  "name": "hashtag_usage",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('hashtag_usage_id_seq')", "isPrimaryKey": true },
    { "name": "hashtag_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "post_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "usage_context", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "post" },
    { "name": "created_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "CURRENT_TIMESTAMP" }
  ],
  "foreignKeys": [
    { "column": "hashtag_id", "references": { "table": "hashtags", "column": "id" } },
    { "column": "post_id", "references": { "table": "posts", "column": "id" } }
  ]
}
{
  "name": "activity_feed",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('activity_feed_id_seq')", "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "activity_type", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "entity_type", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "entity_id", "pgType": "integer", "tsType": "number | null", "nullable": true },
    { "name": "activity_data", "pgType": "json", "tsType": "any", "nullable": true },
    { "name": "visibility", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "public" },
    { "name": "created_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "CURRENT_TIMESTAMP" }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ]
}
{
  "name": "user_connections",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('user_connections_id_seq')", "isPrimaryKey": true },
    { "name": "follower_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "following_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "connection_type", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "follow" },
    { "name": "status", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "active" },
    { "name": "relationship_note", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "interaction_level", "pgType": "integer", "tsType": "number", "nullable": true, "default": 1 },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "follower_id", "references": { "table": "users", "column": "id" } },
    { "column": "following_id", "references": { "table": "users", "column": "id" } }
  ]
}
{
  "name": "trending_topics",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "nullable": false, "default": "nextval('trending_topics_id_seq')", "isPrimaryKey": true },
    { "name": "topic", "pgType": "varchar", "tsType": "string", "nullable": false, "isUnique": true },
    { "name": "category", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "mention_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 1 },
    { "name": "unique_users_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 1 },
    { "name": "trend_score", "pgType": "numeric", "tsType": "number", "nullable": true, "default": 0.0 },
    { "name": "last_mentioned_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": []
}
{
  "name": "marketplace_items",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "default": "nextval('marketplace_items_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "seller_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "title", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "description", "pgType": "text", "tsType": "string", "nullable": false },
    { "name": "category", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "subcategory", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "condition_type", "pgType": "condition_type_enum", "tsType": "string", "nullable": false },
    { "name": "item_type", "pgType": "item_type_enum", "tsType": "string", "nullable": false },
    { "name": "quantity", "pgType": "integer", "tsType": "number", "nullable": true, "default": 1 },
    { "name": "price", "pgType": "numeric", "tsType": "number", "nullable": false },
    { "name": "compare_price", "pgType": "numeric", "tsType": "number | null", "nullable": true },
    { "name": "original_price", "pgType": "numeric", "tsType": "number | null", "nullable": true },
    { "name": "tags", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "location", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "images", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "weight_kg", "pgType": "numeric", "tsType": "number", "nullable": true, "default": 1.0 },
    { "name": "dimensions_cm", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "status", "pgType": "item_status_enum", "tsType": "string", "nullable": true, "default": "active" },
    { "name": "rating_average", "pgType": "numeric", "tsType": "number", "nullable": true, "default": 0.0 },
    { "name": "rating_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "is_negotiable", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "contact_info", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "views_count", "pgType": "integer", "tsType": "number", "nullable": true, "default": 0 },
    { "name": "featured", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": false },
    { "name": "brand", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "specifications", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "features", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "city", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "state_province", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "pincode", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "country", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "India" }
  ],
  "foreignKeys": [
    { "column": "seller_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": [
    { "column": "condition_type", "enum": "condition_type_enum" },
    { "column": "item_type", "enum": "item_type_enum" },
    { "column": "status", "enum": "item_status_enum" }
  ]
}
{
  "name": "cart",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "default": "nextval('cart_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "marketplace_item_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "quantity", "pgType": "integer", "tsType": "number", "nullable": true, "default": 1 },
    { "name": "variant_selection", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } },
    { "column": "marketplace_item_id", "references": { "table": "marketplace_items", "column": "id" } }
  ]
}
{
  "name": "wishlist",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "default": "nextval('wishlist_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "marketplace_item_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } },
    { "column": "marketplace_item_id", "references": { "table": "marketplace_items", "column": "id" } }
  ]
}
{
  "name": "orders",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "default": "nextval('orders_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "order_number", "pgType": "varchar", "tsType": "string", "nullable": false, "isUnique": true },
    { "name": "buyer_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "total_amount", "pgType": "numeric", "tsType": "number", "nullable": false },
    { "name": "status", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "pending" },
    { "name": "shipping_address", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "payment_info", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "notes", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "buyer_id", "references": { "table": "users", "column": "id" } }
  ]
}
{
  "name": "order_items",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "default": "nextval('order_items_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "order_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "marketplace_item_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "quantity", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "unit_price", "pgType": "numeric", "tsType": "number", "nullable": false },
    { "name": "variant_selection", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "order_id", "references": { "table": "orders", "column": "id" } },
    { "column": "marketplace_item_id", "references": { "table": "marketplace_items", "column": "id" } }
  ]
}
{
  "name": "ecommerce_orders",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "default": "nextval('ecommerce_orders_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "order_number", "pgType": "varchar", "tsType": "string", "nullable": false, "isUnique": true },
    { "name": "buyer_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "seller_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "total_amount", "pgType": "numeric", "tsType": "number", "nullable": false },
    {
      "name": "status",
      "pgType": "varchar",
      "tsType": "string",
      "nullable": false,
      "default": "pending"
    },
    { "name": "shipping_address", "pgType": "jsonb", "tsType": "any", "nullable": false },
    { "name": "billing_address", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "order_notes", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "buyer_id", "references": { "table": "users", "column": "id" } },
    { "column": "seller_id", "references": { "table": "users", "column": "id" } }
  ]
}
{
  "name": "ecommerce_order_items",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "default": "nextval('ecommerce_order_items_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "order_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "marketplace_item_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "quantity", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "unit_price", "pgType": "numeric", "tsType": "number", "nullable": false },
    { "name": "total_price", "pgType": "numeric", "tsType": "number", "nullable": false },
    { "name": "item_snapshot", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "order_id", "references": { "table": "ecommerce_orders", "column": "id" } },
    { "column": "marketplace_item_id", "references": { "table": "marketplace_items", "column": "id" } }
  ]
}
{
  "name": "ecommerce_payments",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "default": "nextval('ecommerce_payments_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "order_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    { "name": "amount", "pgType": "numeric", "tsType": "number", "nullable": false },
    { "name": "status", "pgType": "varchar", "tsType": "string", "nullable": false, "default": "pending" },
    { "name": "payment_method", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "razorpay_order_id", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "razorpay_payment_id", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "razorpay_signature", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "captured_at", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "refunded_at", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "refund_amount", "pgType": "numeric", "tsType": "number | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "order_id", "references": { "table": "ecommerce_orders", "column": "id" } }
  ]
}
{
  "name": "ecommerce_shipping_details",
  "columns": [
    { "name": "id", "pgType": "bigint", "tsType": "number", "default": "nextval('ecommerce_shipping_details_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "order_id", "pgType": "bigint", "tsType": "number", "nullable": false },
    {
      "name": "tracking_status",
      "pgType": "varchar",
      "tsType": "string",
      "nullable": true,
      "default": "pending"
    },
    { "name": "courier_partner", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "delhivery_waybill", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "tracking_number", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "shipped_at", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "expected_delivery", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "actual_delivery", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "delivery_notes", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "order_id", "references": { "table": "ecommerce_orders", "column": "id" } }
  ]
}
{
  "name": "service_requests",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('service_requests_id_seq')", "isPrimaryKey": true },
    { "name": "ngo_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "title", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "description", "pgType": "text", "tsType": "string", "nullable": false },
    { "name": "category", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "tags", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "urgency_level", "pgType": "urgency_level_enum", "tsType": "string", "nullable": true, "default": "medium" },
    { "name": "volunteers_needed", "pgType": "integer", "tsType": "number", "nullable": true, "default": 1 },
    { "name": "priority", "pgType": "priority_enum", "tsType": "string", "nullable": true, "default": "medium" },
    { "name": "deadline", "pgType": "date", "tsType": "string | null", "nullable": true },
    { "name": "location", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "requirements", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "image_url", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "status", "pgType": "service_status_enum", "tsType": "string", "nullable": true, "default": "active" },
    { "name": "volunteer_limit", "pgType": "integer", "tsType": "number", "nullable": true, "default": 1 },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "timeline", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "contact_info", "pgType": "text", "tsType": "string | null", "nullable": true }
  ],
  "foreignKeys": [
    { "column": "ngo_id", "references": { "table": "users", "column": "id" } }
  ],
  "enumFields": [
    { "column": "urgency_level", "enum": "urgency_level_enum" },
    { "column": "priority", "enum": "priority_enum" },
    { "column": "status", "enum": "service_status_enum" }
  ]
}
{
  "name": "service_offers",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "nullable": false, "default": "nextval('service_offers_id_seq')", "isPrimaryKey": true },
    { "name": "ngo_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "title", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "description", "pgType": "text", "tsType": "string", "nullable": false },
    { "name": "category", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "skills_offered", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "pricing_info", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "availability", "pgType": "jsonb", "tsType": "any", "nullable": true },
    { "name": "location", "pgType": "varchar", "tsType": "string | null", "nullable": true },
    { "name": "status", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "active" },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": [
    { "column": "ngo_id", "references": { "table": "users", "column": "id" } }
  ]
}
{
  "name": "service_clients",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "default": "nextval('service_clients_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "service_offer_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "client_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "message", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "proposed_amount", "pgType": "numeric", "tsType": "number | null", "nullable": true },
    { "name": "proposed_start_date", "pgType": "date", "tsType": "string | null", "nullable": true },
    { "name": "status", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "pending" },
    { "name": "applied_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "expected_beneficiaries", "pgType": "integer", "tsType": "number | null", "nullable": true },
    { "name": "project_timeline", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "start_date", "pgType": "date", "tsType": "string | null", "nullable": true },
    { "name": "end_date", "pgType": "date", "tsType": "string | null", "nullable": true }
  ],
  "foreignKeys": [
    { "column": "service_offer_id", "references": { "table": "service_offers", "column": "id" } },
    { "column": "client_id", "references": { "table": "users", "column": "id" } }
  ]
}
{
  "name": "service_volunteers",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "default": "nextval('service_volunteers_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "service_request_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "volunteer_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "application_message", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "status", "pgType": "varchar", "tsType": "string", "nullable": true, "default": "pending" },
    { "name": "applied_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "volunteer_hours", "pgType": "numeric", "tsType": "number | null", "nullable": true },
    { "name": "team_size", "pgType": "integer", "tsType": "number", "nullable": true, "default": 1 },
    { "name": "team_members", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "impact_statement", "pgType": "text", "tsType": "string | null", "nullable": true },
    { "name": "estimated_impact_value", "pgType": "numeric", "tsType": "number | null", "nullable": true }
  ],
  "foreignKeys": [
    { "column": "service_request_id", "references": { "table": "service_requests", "column": "id" } },
    { "column": "volunteer_id", "references": { "table": "users", "column": "id" } }
  ]
}
{
  "name": "enhanced_suggestions_cache",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "default": "nextval('enhanced_suggestions_cache_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "user_id", "pgType": "integer", "tsType": "number", "nullable": false },
    { "name": "suggestion_type", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "suggestion_data", "pgType": "json", "tsType": "any", "nullable": false },
    { "name": "generated_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "CURRENT_TIMESTAMP" },
    { "name": "expires_at", "pgType": "timestamp", "tsType": "string", "nullable": true, "default": "(CURRENT_TIMESTAMP + INTERVAL '2 hours')" },
    { "name": "cache_key", "pgType": "varchar", "tsType": "string | null", "nullable": true }
  ],
  "foreignKeys": [
    { "column": "user_id", "references": { "table": "users", "column": "id" } }
  ]
}
{
  "name": "system_notifications",
  "columns": [
    { "name": "id", "pgType": "integer", "tsType": "number", "default": "nextval('system_notifications_id_seq')", "nullable": false, "isPrimaryKey": true },
    { "name": "title", "pgType": "varchar", "tsType": "string", "nullable": false },
    { "name": "message", "pgType": "text", "tsType": "string", "nullable": false },
    {
      "name": "type",
      "pgType": "varchar",
      "tsType": "string",
      "nullable": true,
      "default": "info"
    },
    {
      "name": "target_audience",
      "pgType": "varchar",
      "tsType": "string",
      "nullable": true,
      "default": "all"
    },
    { "name": "is_active", "pgType": "boolean", "tsType": "boolean", "nullable": true, "default": true },
    { "name": "start_date", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "end_date", "pgType": "timestamptz", "tsType": "string | null", "nullable": true },
    { "name": "admin_user_id", "pgType": "integer", "tsType": "number | null", "nullable": true },
    { "name": "created_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" },
    { "name": "updated_at", "pgType": "timestamptz", "tsType": "string", "nullable": true, "default": "now()" }
  ],
  "foreignKeys": []
}
{
  "enums": {

e_status_enum": ["active", "in_progress", "completed", "cancelled"],
    "urgency_level_enum": ["low", "medium", "high", "critical"],
    "user_type_enum": ["individual", "ngo", "company"],
    "verification_level_enum": ["basic", "advanced"],
    "verification_status_enum": ["unverified", "pending", "verified", "rejected"]
  }
}  },

  "tables": {
    "users": { ... },
    "user_addresses": { ... },
    "user_sessions": { ... },

    "user_feed_preferences": { ... },
    "user_interests": { ... },
    "user_notifications": { ... },
    "login_history": { ... },
    "individual_verifications": { ... },
    "ngo_verifications": { ... },
    "company_verifications": { ... },
    "phone_verifications": { ... },
    "otp_verifications": { ... },
    "email_verifications": { ... },

    "posts": { ... },
    "post_comments": { ... },
    "post_reactions": { ... },
    "post_shares": { ... },
    "post_analytics": { ... },
    "post_interactions": { ... },
    "comment_reactions": { ... },
    "hashtags": { ... },
    "hashtag_usage": { ... },
    "activity_feed": { ... },
    "user_connections": { ... },
    "trending_topics": { ... },

    "marketplace_items": { ... },
    "cart": { ... },
    "wishlist": { ... },
    "orders": { ... },
    "order_items": { ... },

    "ecommerce_orders": { ... },
    "ecommerce_order_items": { ... },
    "ecommerce_payments": { ... },
    "ecommerce_shipping_details": { ... },

    "service_requests": { ... },
    "service_offers": { ... },
    "service_clients": { ... },
    "service_volunteers": { ... },
    "enhanced_suggestions_cache": { ... },
    "system_notifications": { ... }
  }
}
  }
}-- ===============================================================
-- SERVICE OFFER ADMIN APPROVAL SYSTEM
-- Simple workflow: NGO creates  Pending  Admin approves/rejects  Visible to all OR Track tab
-- ===============================================================

-- 1. Create admin status enum
DO $$ 
BEGIN
    -- Create admin status enum if it doesn't exist
    IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'admin_status_enum') THEN
        CREATE TYPE admin_status_enum AS ENUM ('pending', 'approved', 'rejected');
    END IF;
END $$;

-- ===============================================================
-- 2. ADD ADMIN APPROVAL COLUMNS TO SERVICE_OFFERS
-- ===============================================================

-- Add admin approval columns to service_offers table
ALTER TABLE service_offers 
ADD COLUMN IF NOT EXISTS admin_status admin_status_enum DEFAULT 'pending',
ADD COLUMN IF NOT EXISTS admin_re-- ===============================================================
-- SERVICE OFFER ADMIN APPROVAL SYSTEM
-- Simple workflow: NGO creates  Pending  Admin approves/rejects  Visible to all OR Track tab
-- ===============================================================

-- 1. Create admin status enum
DO $$ 
BEGIN
    -- Create admin status enum if it doesn't exist
    IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'admin_status_enum') THEN
        CREATE TYPE admin_status_enum AS ENUM ('pending', 'approved', 'rejected');
    END IF;
END $$;

-- ===============================================================
-- 2. ADD ADMIN APPROVAL COLUMNS TO SERVICE_OFFERS
-- ===============================================================

-- Add admin approval columns to service_offers table
ALTER TABLE service_offers 
ADD COLUMN IF NOT EXISTS admin_status admin_status_enum DEFAULT 'pending',
ADD COLUMN IF NOT EXISTS admin_reviewed_at timestamptz NULL,
ADD COLUMN IF NOT EXISTS admin_reviewed_by integer NULL,
ADD COLUMN IF NOT EXISTS admin_comments text NULL,
ADD COLUMN IF NOT EXISTS submitted_for_review_at timestamptz DEFAULT NOW();

-- Add foreign key constraint for admin_reviewed_by
DO $$
BEGIN
    -- Add foreign key constraint if it doesn't exist
    IF NOT EXISTS (
        SELECT 1 FROM information_schema.table_constraints 
        WHERE constraint_name = 'fk_service_offers_admin_reviewed_by'
    ) THEN
        ALTER TABLE service_offers 
        ADD CONSTRAINT fk_service_offers_admin_reviewed_by 
        FOREIGN KEY (admin_reviewed_by) REFERENCES users(id) ON DELETE SET NULL;
    END IF;
END $$;

-- Add indexes for performance
CREATE INDEX IF NOT EXISTS idx_service_offers_admin_status ON service_offers(admin_status);
CREATE INDEX IF NOT EXISTS idx_service_offers_admin_reviewed_at ON service_offers(admin_reviewed_at);
CREATE INDEX IF NOT EXISTS idx_service_offers_submitted_for_review_at ON service_offers(submitted_for_review_at);
CREATE INDEX IF NOT EXISTS idx_service_offers_ngo_id ON service_offers(ngo_id);

-- ===============================================================
-- 3. WORKFLOW RULES
-- ===============================================================

-- Update existing service offers to approved status (since they were created before admin approval)
-- New offers will default to 'pending' and need admin approval
UPDATE service_offers 
SET 
    admin_status = 'approved', 
    admin_reviewed_at = NOW(),
    submitted_for_review_at = COALESCE(created_at, NOW())
WHERE admin_status IS NULL;

COMMIT;

-- ===============================================================
-- WORKFLOW SUMMARY
-- ===============================================================

--  NGO Workflow:
-- 1. NGO creates service offer  admin_status = 'pending'
-- 2. Offer appears in NGO's "Track Offers" tab as pending
-- 3. After admin review:
--    - If approved: Offer visible to everyone on service offers page
--    - If rejected: Shows rejection reason in "Track Offers" tab

--  Admin Workflow:
-- 1. Admin sees all pending offers in admin panel
-- 2. Admin can approve/reject with comments
-- 3. Approved offers go live for everyone to see
-- 4. Rejected offers are stored for history and NGO tracking

--  Database Logic:
-- - admin_status = 'pending': Visible only to NGO (Track Offers) and Admin
-- - admin_status = 'approved': Visible to everyone on service offers page  
-- - admin_status = 'rejected': Visible to NGO (Track Offers) and Admin (history)
-- - admin_comments: Feedback for NGO on approval/rejection
-- - submitted_for_review_at: Used for 5-day deadline tracking

-- Migration to ensure hashtag tracking tables exist
-- Run this in your Supabase SQL editor

-- Create hashtags table if it doesn't exist
CREATE TABLE IF NOT EXISTS hashtags (
    id SERIAL PRIMARY KEY,
    tag VARCHAR(100) UNIQUE NOT NULL,
    total_mentions INTEGER DEFAULT 0,
    weekly_mentions INTEGER DEFAULT 0,
    daily_mentions INTEGER DEFAULT 0,
    trending_score DECIMAL(10, 2) DEFAULT 0,
    category VARCHAR(50) DEFAULT 'general',
    is_trending BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Create indexes for performance
CREATE INDEX IF NOT EXISTS idx_hashtags_tag ON hashtags(tag);
CREATE INDEX IF NOT EXISTS idx_hashtags_trending ON hashtags(is_trending);
CREATE INDEX IF NOT EXISTS idx_hashtags_score ON hashtags(trending_score DESC);
CREATE INDEX IF NOT EXISTS idx_hashtags_daily_mentions ON hashtags(daily_mentions DESC);
CREATE INDEX IF NOT EXISTS idx_hashtags_category ON hashtags(category);

-- Create hashtag usage tracking table if it doesn't exist
CREATE TABLE IF NOT EXISTS hashtag_usage (
    id SERIAL PRIMARY KEY,
    hashtag_id INTEGER NOT NULL REFERENCES hashtags(id) ON DELETE CASCADE,
    post_id INTEGER NOT NULL REFERENCES posts(id) ON DELETE CASCADE,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    usage_context VARCHAR(20) DEFAULT 'post',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(hashtag_id, post_id)
);

-- Create indexes for hashtag_usage
CREATE INDEX IF NOT EXISTS idx_hashtag_usage_hashtag_id ON hashtag_usage(hashtag_id);
CREATE INDEX IF NOT EXISTS idx_hashtag_usage_post_id ON hashtag_usage(post_id);
CREATE INDEX IF NOT EXISTS idx_hashtag_usage_user_id ON hashtag_usage(user_id);
CREATE INDEX IF NOT EXISTS idx_hashtag_usage_created_at ON hashtag_usage(created_at);

-- Function to reset daily/weekly counters (run this periodically)
CREATE OR REPLACE FUNCTION reset_hashtag_counters()
RETURNS VOID AS $$
BEGIN
    -- Reset daily counters (run this daily)
    UPDATE hashtags SET daily_mentions = 0;
    
    -- Reset weekly counters (run this weekly)
    -- UPDATE hashtags SET weekly_mentions = 0;
    
    -- Recalculate trending status
    UPDATE hashtags 
    SET is_trending = false;
    
    -- Set top hashtags as trending
    WITH top_hashtags AS (
        SELECT id 
        FROM hashtags 
        WHERE daily_mentions > 0 
        ORDER BY trending_score DESC, daily_mentions DESC 
        LIMIT 5
    )
    UPDATE hashtags 
    SET is_trending = true 
    WHERE id IN (SELECT id FROM top_hashtags);
END;
$$ LANGUAGE plpgsql;

-- Remove sample data if it was accidentally inserted
DELETE FROM hashtags WHERE tag IN ('socialimpact', 'education', 'sustainability', 'innovation', 'community');
-- Add view_count column to posts table if it doesn't exist
DO $$ 
BEGIN
    -- Add view_count column if it doesn't exist
    IF NOT EXISTS (SELECT 1 FROM information_schema.columns 
                   WHERE table_name = 'posts' AND column_name = 'view_count') THEN
        ALTER TABLE posts ADD COLUMN view_count INTEGER DEFAULT 0;
    END IF;
    
    -- Update view_count based on existing post_interactions if the column was just added
    IF EXISTS (SELECT 1 FROM information_schema.columns 
               WHERE table_name = 'posts' AND column_name = 'view_count') THEN
        UPDATE posts 
        SET view_count = COALESCE((
            SELECT COUNT(*) 
            FROM post_interactions 
            WHERE post_interactions.post_id = posts.id 
            AND interaction_type = 'view'
        ), 0)
        WHERE view_count = 0;
    END IF;
END $$;

-- Add share_count column if it doesn't exist (it might already exist from previous schema)
DO $$ 
BEGIN
    IF NOT EXISTS (SELECT 1 FROM information_schema.columns 
                   WHERE table_name = 'posts' AND column_name = 'share_count') THEN
        ALTER TABLE posts ADD COLUMN share_count INTEGER DEFAULT 0;
    END IF;
END $$;

-- Add reaction_count column if it doesn't exist 
DO $$ 
BEGIN
    IF NOT EXISTS (SELECT 1 FROM information_schema.columns 
                   WHERE table_name = 'posts' AND column_name = 'reaction_count') THEN
        ALTER TABLE posts ADD COLUMN reaction_count INTEGER DEFAULT 0;
    END IF;
END $$;

-- Add comment_count column if it doesn't exist
DO $$ 
BEGIN
    IF NOT EXISTS (SELECT 1 FROM information_schema.columns 
                   WHERE table_name = 'posts' AND column_name = 'comment_count') THEN
        ALTER TABLE posts ADD COLUMN comment_count INTEGER DEFAULT 0;
    END IF;
END $$;